(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{2783:function(e,t,a){Promise.resolve().then(a.bind(a,580))},8792:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var r=a(5250),s=a.n(r)},7907:function(e,t,a){"use strict";var r=a(5313);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},580:function(e,t,a){"use strict";a.r(t);var r=a(7437),s=a(9765),n=a(2038),l=a(2105),o=a(2265),c=a(7907),i=a(2926),u=a(2770),d=a(8792);t.default=function(){(0,c.useRouter)();let[e,t]=(0,o.useState)(!1),[a,m]=(0,o.useState)(""),[h,x]=(0,o.useState)({email:"",password:""}),{login:f}=(0,i.useAuth)(),p=t=>{t.preventDefault(),m(""),e||g()},g=async()=>{if(""===h.email.trim()||""===h.password.trim()){m("Email or password is required!");return}t(!0);try{await b({email:h.email,password:h.password}),t(!1)}catch(e){m("User not found"),t(!1)}},b=async e=>{let{email:t,password:a}=e;await f(t,a)},v=(e,t)=>{m(""),x({...h,[e]:t})};return(0,r.jsx)("div",{className:"min-h-screen bg-base-200 flex items-center",children:(0,r.jsx)("div",{className:"card mx-auto w-full max-w-5xl shadow-xl",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 grid-cols-1 bg-base-100 rounded-xl",children:[(0,r.jsx)("div",{children:(0,r.jsx)(s.Z,{})}),(0,r.jsxs)("div",{className:"py-24 px-10",children:[(0,r.jsxs)("form",{onSubmit:e=>p(e),children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-center text-lg md:mt-0 mt-6 font-semibold",children:"Enter your email and password"}),(0,r.jsx)(n.Z,{type:"email",defaultValue:h.email,updateType:"email",containerStyle:"mt-4",labelTitle:"Enter your Email",placeholder:"Ex - Test Ali@gmail.com",updateFormValue:v}),(0,r.jsx)(u.Z,{labelTitle:"Password",type:"password",placeholder:"Enter your password",updateFormValue:v,updateType:"password"})]}),(0,r.jsxs)("div",{className:"mt-8",children:[a&&(0,r.jsx)(l.Z,{styleClass:"mt-8",children:a}),(0,r.jsxs)("button",{type:"submit",className:"btn mt-2 w-full btn-primary",children:[e&&(0,r.jsx)("span",{className:"loading loading-spinner"})," login"]})]})]}),(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsx)(d.default,{href:"/register",className:"text-blue-500 hover:underline",children:"Donâ€™t have an account? Sign up here"})})]})]})})})}},2038:function(e,t,a){"use strict";var r=a(7437),s=a(2265);t.Z=function(e){let{labelTitle:t,labelStyle:a,type:n,containerStyle:l,defaultValue:o,placeholder:c,updateFormValue:i,updateType:u}=e,[d,m]=(0,s.useState)(o||""),h=e=>{m(e),i(u,e)};return(0,r.jsxs)("div",{className:"form-control w-full ".concat(l),children:[(0,r.jsx)("label",{className:"label",children:(0,r.jsx)("span",{className:"label-text text-xs text-base-content "+(a||""),children:t})}),(0,r.jsx)("input",{type:n||"text",value:d,placeholder:c||"",onChange:e=>h(e.target.value),className:"input input-bordered w-full"})]})}},2770:function(e,t,a){"use strict";var r=a(7437),s=a(2265);t.Z=function(e){let{labelTitle:t,labelStyle:a,type:n="text",containerStyle:l,defaultValue:o,placeholder:c,updateFormValue:i,updateType:u}=e,[d,m]=(0,s.useState)(o||""),[h,x]=(0,s.useState)(!1),f=e=>{m(e),i(u,e)};return(0,r.jsxs)("div",{className:"form-control w-full ".concat(l),children:[(0,r.jsx)("label",{className:"label",children:(0,r.jsx)("span",{className:"label-text text-xs text-base-content ".concat(a||""),children:t})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:h?"text":n,value:d,placeholder:c||"",onChange:e=>f(e.target.value),className:"input input-bordered w-full"}),"password"===n&&(0,r.jsxs)("button",{type:"button",onClick:()=>{x(e=>!e)},className:"absolute inset-y-0 right-0 flex items-center pr-3",children:[h?"Hide":"Show"," "]})]})]})}},2105:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=function(e){let{styleClass:t,children:a}=e;return(0,r.jsx)("p",{className:"text-center text-error ".concat(t||""),children:a})}},9765:function(e,t,a){"use strict";var r=a(7437),s=a(7381);t.Z=function(){return(0,r.jsx)("div",{className:"hero min-h-full rounded-l-xl bg-base-200",children:(0,r.jsx)("div",{className:"hero-content py-12",children:(0,r.jsxs)("div",{className:"max-w-md",children:[(0,r.jsx)("h1",{className:"text-3xl text-center font-bold ",children:s.iC}),(0,r.jsx)("div",{className:"text-center mt-12",children:(0,r.jsx)("img",{src:"./intro.png",alt:"Test Ali Admin Template",className:"w-48 inline-block"})}),(0,r.jsx)("p",{className:"mt-8 font-bold text-xs"})]})})})}},7381:function(e,t,a){"use strict";a.d(t,{A:function(){return l},Qn:function(){return n},aq:function(){return s},iC:function(){return r}});let r="Test Ali",s=Object.freeze({DEFAULT:"DEFAULT",LEAD_ADD_NEW:"LEAD_ADD_NEW"}),n=Object.freeze({DEFAULT:"DEFAULT",NOTIFICATION:"NOTIFICATION"}),l=Object.freeze({DEFAULT:"DEFAULT"})},2926:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return i},useAuth:function(){return u}});var r=a(7437),s=a(2265),n={saveToken:e=>{localStorage.setItem("token",e)},getToken:()=>JSON.stringify(localStorage.getItem("token")),logout:async()=>(localStorage.removeItem("token"),1),isAuthenticated:()=>!!localStorage.getItem("token")},l=a(7907),o=a(7908);let c=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,s.useState)(!1),[u,d]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),x=(0,l.useRouter)(),f=(0,s.useCallback)(async()=>{let e=n.getToken();if(e)try{let t=await o.Z.get("".concat("http://127.0.0.1:5090","/api/user"),{headers:{Authorization:"Bearer ".concat(e)}});localStorage.setItem("userProfile",JSON.stringify(t.data)),d(t.data)}catch(e){console.error("Error fetching user profile:",e),await p()}},[]),p=(0,s.useCallback)(async()=>{let e=n.getToken();if(e)try{let{auth_token:t}=(await o.Z.post("".concat("http://127.0.0.1:5090","/api/auth/refresh"),{refresh_token:e})).data;await n.saveToken(t),await f()}catch(e){console.error("Error refreshing token:",e),N()}},[]),g=(0,s.useCallback)(()=>{i(n.isAuthenticated()),h(!1)},[]);(0,s.useEffect)(()=>{g()},[g]);let b=(0,s.useCallback)(async(e,t)=>{try{let a=await o.Z.post("".concat("http://127.0.0.1:5090","/api/auth/login"),{email:e,password:t}),{auth_token:r}=a.data.data;console.log("auth_token : ",r),n.saveToken(r),d(a.data.user),i(!0)}catch(e){throw console.error("Login error:",e),e}},[f]),v=(0,s.useCallback)(async(e,t,a)=>{try{let r=await o.Z.post("".concat("http://127.0.0.1:5090","/api/auth/register"),{email:e,username:a,password:t,name:""}),{auth_token:s}=r.data.data;n.saveToken(s),d(r.data.user),i(!0)}catch(e){throw console.error("Registration error:",e),e}},[f]),N=(0,s.useCallback)(async()=>{let e=localStorage.getItem("token");if(e)try{await o.Z.post("".concat("http://127.0.0.1:5090","/api/auth/logout"),{},{headers:{Authorization:"Bearer ".concat(e)}}),await n.logout(),d(null),i(!1),localStorage.removeItem("userProfile"),x.push("/login")}catch(e){console.error("Error during logout:",e)}},[x]);return(0,r.jsx)(c.Provider,{value:{isAuthenticated:a,isLoading:m,userProfile:u,login:b,logout:N,register:v},children:t})}function u(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[908,250,971,69,744],function(){return e(e.s=2783)}),_N_E=e.O()}]);