(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{2606:function(e,t,a){Promise.resolve().then(a.bind(a,6866))},6866:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var s=a(7437),l=a(2265),n=a(6623),r=a(7907),i=a(6123),o=a(2926),c=a(1659),d=a(7960),u=a(4710),m=a(8096),h=a(9088),f=a(4217),x=a(7381),p=function(e){let{contentRef:t}=e,{noOfNotifications:a,pageTitle:r,newNotificationMessage:o,newNotificationStatus:f}=(0,n.CG)(e=>e.header),[x,p]=(0,l.useState)(localStorage.getItem("theme")),b=(0,n.TL)();return(0,l.useEffect)(()=>{console.log(o),""!==o&&(console.log("herer"),1==f?i.Am.success(o):i.Am.error(o),b((0,h.DO)()))},[o]),(0,l.useEffect)(()=>{t.current&&t.current.scroll({top:0,behavior:"smooth"})},[r]),(0,l.useEffect)(()=>{(0,c.themeChange)(!1),null===x&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?p("dark"):p("light"))},[]),(0,s.jsxs)("div",{className:"navbar sticky top-0 bg-base-100 z-10 shadow-md",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{htmlFor:"left-sidebar-drawer",className:"btn btn-primary drawer-button lg:hidden",children:(0,s.jsx)(d.Z,{className:"h-5 inline-block w-5"})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold ml-2",children:r})]}),(0,s.jsx)("div",{className:"flex-none",children:(0,s.jsxs)("label",{className:"swap",children:[(0,s.jsx)("input",{type:"checkbox"}),(0,s.jsx)(m.Z,{"data-set-theme":"light","data-act-class":"ACTIVECLASS",className:"fill-current w-6 h-6 ".concat("dark"===x?"swap-on":"swap-off")}),(0,s.jsx)(u.Z,{"data-set-theme":"dark","data-act-class":"ACTIVECLASS",className:"fill-current w-6 h-6 ".concat("light"===x?"swap-on":"swap-off")})]})})]})},b=a(8621),g=a(8792),j=a(8005),N=function(e){let{submenu:t,pageName:a,icon:n}=e,[i,o]=(0,l.useState)(!1),c=(0,r.usePathname)();return(0,l.useEffect)(()=>{t&&t.some(e=>e.path===location.pathname)&&o(!0)},[t,location.pathname]),(0,s.jsxs)("div",{className:"flex flex-col hover:bg-base-100 bg-base-100",children:[(0,s.jsxs)("div",{className:"w-full block",onClick:()=>o(!i),children:[n," ",a,(0,s.jsx)(j.Z,{className:"w-5 h-5 mt-1 float-right delay-400 duration-500 transition-all ".concat(i?"rotate-180":"")})]}),(0,s.jsx)("div",{className:"w-full ".concat(i?"":"hidden"),children:(0,s.jsx)("ul",{className:"menu menu-compact",children:t&&t.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsxs)(g.default,{href:e.path,className:"".concat(c==e.path?"font-semibold bg-base-200":""),children:[e.icon," ",e.pageName,c===e.path?(0,s.jsx)("span",{className:"absolute mt-1 mb-1 inset-y-0 left-0 w-1 rounded-tr-md rounded-br-md bg-primary","aria-hidden":"true"}):null]})},t))})})]})},w=a(6962);let y=[{path:"/dashboard",icon:(0,s.jsx)(w.Z,{className:"h-6 w-6"}),pageName:"Dashboard",pageTitle:"Dashboard"}];var v=a(558),T=a(2615),k=a(4814),C=function(e){let t=(0,r.usePathname)(),a=(0,n.TL)(),{logout:i}=(0,o.useAuth)(),c=(0,n.CG)(e=>e.user);(0,l.useEffect)(()=>{console.log(t);let e=y.filter(e=>e.path==t)[0];if(e)a((0,h.Iw)({title:e.pageTitle}));else{let e=t.indexOf("/",t.indexOf("/")+1);if(-1!==e){let s=t.substring(0,e),l=y.filter(e=>e.path==s)[0];if(l.submenu){let e=l.submenu.filter(e=>e.path==t)[0];console.log("herere",e),a((0,h.Iw)({title:e.pageTitle}))}}}},[t]),(0,l.useEffect)(()=>{a((0,k.bG)())},[]);let d=async()=>{await i()};return(0,s.jsxs)("div",{className:"drawer-side z-30 overflow-hidden",children:[(0,s.jsx)("label",{htmlFor:"left-sidebar-drawer",className:"drawer-overlay"}),(0,s.jsxs)("ul",{className:"menu pt-2 w-80 bg-base-100 min-h-full text-base-content",children:[(0,s.jsx)("button",{className:"btn btn-ghost bg-base-300 btn-circle z-50 top-0 right-0 mt-4 mr-2 absolute lg:hidden",onClick:()=>{let e=document.getElementById("left-sidebar-drawer");e&&e.click()},children:(0,s.jsx)(b.Z,{className:"h-5 inline-block w-5"})}),(0,s.jsx)("li",{className:"mb-2 font-semibold text-xl",children:(0,s.jsxs)(g.default,{href:"/dashboard",children:[(0,s.jsx)("img",{className:"mask mask-squircle w-10",src:"/logo192.png",alt:"Test Ali Logo"}),"Test Ali"]})}),(0,s.jsx)("div",{className:"overflow-y-scroll pb-20 no-scrollbar",style:{height:"85vh"},children:y.map((e,a)=>(0,s.jsx)("li",{className:"",children:e.submenu?(0,s.jsx)(N,{...e}):(0,s.jsxs)(g.default,{href:e.path,className:"".concat(t==e.path?"font-semibold bg-base-200 ":"font-normal"),children:[e.icon," ",e.pageName,t===e.path?(0,s.jsx)("span",{className:"absolute inset-y-0 left-0 w-1 rounded-tr-md rounded-br-md bg-primary","aria-hidden":"true"}):null]})},a))})]}),(0,s.jsxs)("div",{className:"dropdown bottom-0 absolute dropdown-top w-80 ",children:[(0,s.jsxs)("div",{tabIndex:0,role:"button",className:"btn w-full bg-base-100 text-left justify-start ",children:[(0,s.jsx)("div",{className:"avatar",children:(0,s.jsx)("div",{className:"w-6 rounded-full",children:(0,s.jsx)("img",{src:c.avatar})})}),c.name,(0,s.jsx)(v.Z,{className:"w-4 "})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content visible w-52 px-4 z-[1]  menu  shadow bg-base-200 rounded-box ",children:(0,s.jsx)("li",{onClick:()=>d(),children:(0,s.jsxs)("a",{className:" ",children:[(0,s.jsx)(T.Z,{className:"w-4 "}),"Logout"]})})})]})]})},A=a(5855),E=function(e){let{extraObject:t,closeRightDrawer:a}=e;return(0,s.jsx)(s.Fragment,{children:[...Array(15)].map((e,t)=>(0,s.jsx)("div",{className:"grid mt-3 card rounded-box p-3"+(t<5?" bg-base-300":"bg-base-200"),children:t%2==0?"Your sales has increased by 30% yesterday":"Total likes for instagram post - New launch this week,  has crossed 100k "},t))})},L=function(){let{isOpen:e,bodyType:t,extraObject:a,header:l}=(0,n.CG)(e=>e.rightDrawer),r=(0,n.TL)(),i=()=>{r((0,f.o8)())};return(0,s.jsxs)("div",{className:" fixed overflow-hidden z-20 bg-gray-900 bg-opacity-25 inset-0 transform ease-in-out "+(e?" transition-opacity opacity-100 duration-500 translate-x-0  ":" transition-all delay-500 opacity-0 translate-x-full  "),children:[(0,s.jsx)("section",{className:"w-80 md:w-96  right-0 absolute bg-base-100 h-full shadow-xl delay-400 duration-500 ease-in-out transition-all transform  "+(e?" translate-x-0 ":" translate-x-full "),children:(0,s.jsxs)("div",{className:"relative  pb-5 flex flex-col  h-full",children:[(0,s.jsxs)("div",{className:"navbar   flex pl-4 pr-4   shadow-md ",children:[(0,s.jsx)("button",{className:"float-left btn btn-circle btn-outline btn-sm",onClick:e=>i(),children:(0,s.jsx)(A.Z,{className:"h-5 w-5"})}),(0,s.jsx)("span",{className:"ml-2 font-bold text-xl",children:l})]}),(0,s.jsx)("div",{className:"overflow-y-scroll pl-4 pr-4",children:(0,s.jsx)("div",{className:"flex flex-col w-full",children:{[x.Qn.NOTIFICATION]:(0,s.jsx)(E,{...a,closeRightDrawer:i}),[x.Qn.DEFAULT]:(0,s.jsx)("div",{})}[t]})})]})}),(0,s.jsx)("section",{className:" w-screen h-full cursor-pointer ",onClick:e=>i()})]})},S=a(2253),I=a(828),O=a(6990),D=a(2038),Z=function(e){let{labelTitle:t,labelStyle:a,containerStyle:n,defaultValue:r,placeholder:i,updateFormValue:o,updateType:c}=e,[d,u]=(0,l.useState)(r||""),m=e=>{u(e),o(c,e)};return(0,s.jsxs)("div",{className:"form-control w-full ".concat(n),children:[(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text text-xs text-base-content "+(a||""),children:t})}),(0,s.jsx)("textarea",{value:d,placeholder:i||"",onChange:e=>m(e.target.value),className:"textarea textarea-bordered w-full"})]})},_=a(2105);let F={first_name:"",last_name:"",email:"",avatar:"",description:""};var M=function(e){let{closeModal:t}=e,a=(0,I.I0)(),[n,r]=(0,l.useState)(!1),[i,o]=(0,l.useState)(""),[c,d]=(0,l.useState)(F),u=()=>{if(""===c.first_name.trim())return o("First Name is required!");{if(""===c.email.trim())return o("Email id is required!");let e={id:7,email:c.email,first_name:c.first_name,last_name:c.last_name,description:c.description,avatar:"https://reqres.in/img/faces/1-image.jpg"};a((0,O.Yf)({newLeadObj:e})),a((0,h.c0)({message:"New Lead Added!",status:1})),t()}},m=(e,t)=>{o(""),d({...c,[e]:t})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.Z,{type:"text",defaultValue:c.first_name,updateType:"first_name",containerStyle:"mt-4",labelTitle:"First Name",updateFormValue:m}),(0,s.jsx)(D.Z,{type:"text",defaultValue:c.last_name,updateType:"last_name",containerStyle:"mt-4",labelTitle:"Last Name",updateFormValue:m}),(0,s.jsx)(D.Z,{type:"email",defaultValue:c.email,updateType:"email",containerStyle:"mt-4",labelTitle:"Email Id",updateFormValue:m}),(0,s.jsx)(Z,{defaultValue:c.description,updateType:"description",containerStyle:"mt-4",labelTitle:"Description",updateFormValue:m}),(0,s.jsx)(_.Z,{styleClass:"mt-16",children:i}),(0,s.jsxs)("div",{className:"modal-action",children:[(0,s.jsx)("button",{className:"btn btn-ghost",onClick:()=>t(),children:"Cancel"}),(0,s.jsx)("button",{className:"btn btn-primary px-6",onClick:()=>u(),children:"Save"})]})]})},P=function(e){let{extraObject:t,closeModal:a}=e,l=(0,n.TL)(),{message:r,type:i,index:o}=t,c=async()=>{i===x.A.LEAD_DELETE&&(l((0,O.u9)({index:o})),l((0,h.c0)({message:"Lead Deleted!",status:1}))),a()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-xl mt-8 text-center",children:r}),(0,s.jsxs)("div",{className:"modal-action mt-12",children:[(0,s.jsx)("button",{className:"btn btn-outline",onClick:()=>a(),children:"Cancel"}),(0,s.jsx)("button",{className:"btn btn-primary w-36",onClick:()=>c(),children:"Yes"})]})]})},z=function(){let{isOpen:e,bodyType:t,size:a,extraObject:l,title:r}=(0,n.CG)(e=>e.modal),i=(0,n.TL)(),o=()=>{i((0,S.Mr)())};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"modal ".concat(e?"modal-open":""),children:(0,s.jsxs)("div",{className:"modal-box  ".concat("lg"===a?"max-w-5xl":""),children:[(0,s.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:()=>o(),children:"âœ•"}),(0,s.jsx)("h3",{className:"font-semibold text-2xl pb-6 text-center",children:r}),{[x.aq.LEAD_ADD_NEW]:(0,s.jsx)(M,{closeModal:o,extraObject:l}),[x.aq.CONFIRMATION]:(0,s.jsx)(P,{extraObject:l,closeModal:o}),[x.aq.DEFAULT]:(0,s.jsx)("div",{})}[t]]})})})};function R(e){let{children:t,params:a}=e,{isAuthenticated:c,isLoading:d}=(0,o.useAuth)(),u=(0,r.useRouter)();(0,n.TL)();let m=(0,l.useRef)(null);return((0,l.useEffect)(()=>{d||c||u.replace("/login")},[c,d,u]),d)?(0,s.jsx)("div",{children:"Loading..."}):c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"drawer lg:drawer-open",children:[(0,s.jsx)("input",{id:"left-sidebar-drawer",type:"checkbox",className:"drawer-toggle"}),(0,s.jsxs)("div",{className:"drawer-content flex flex-col ",children:[(0,s.jsx)(p,{contentRef:m}),(0,s.jsxs)("main",{className:"flex-1 overflow-y-auto md:pt-4 pt-4 px-6  bg-base-200",ref:m,children:[t,(0,s.jsx)("div",{className:"h-16"})]})]}),(0,s.jsx)(C,{})]}),(0,s.jsx)(L,{}),(0,s.jsx)(i.Ix,{}),(0,s.jsx)(z,{})]}):null}},2038:function(e,t,a){"use strict";var s=a(7437),l=a(2265);t.Z=function(e){let{labelTitle:t,labelStyle:a,type:n,containerStyle:r,defaultValue:i,placeholder:o,updateFormValue:c,updateType:d}=e,[u,m]=(0,l.useState)(i||""),h=e=>{m(e),c(d,e)};return(0,s.jsxs)("div",{className:"form-control w-full ".concat(r),children:[(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text text-xs text-base-content "+(a||""),children:t})}),(0,s.jsx)("input",{type:n||"text",value:u,placeholder:o||"",onChange:e=>h(e.target.value),className:"input input-bordered w-full"})]})}},2105:function(e,t,a){"use strict";var s=a(7437);a(2265),t.Z=function(e){let{styleClass:t,children:a}=e;return(0,s.jsx)("p",{className:"text-center text-error ".concat(t||""),children:a})}},9088:function(e,t,a){"use strict";a.d(t,{DO:function(){return n},Iw:function(){return l},c0:function(){return r}});let s=(0,a(5972).oM)({name:"header",initialState:{pageTitle:"Home",noOfNotifications:15,newNotificationMessage:"",newNotificationStatus:1},reducers:{setPageTitle:(e,t)=>{e.pageTitle=t.payload.title},removeNotificationMessage:e=>{e.newNotificationMessage=""},showNotification:(e,t)=>{e.newNotificationMessage=t.payload.message,e.newNotificationStatus=t.payload.status}}}),{setPageTitle:l,removeNotificationMessage:n,showNotification:r}=s.actions;t.ZP=s.reducer},2253:function(e,t,a){"use strict";a.d(t,{Mr:function(){return n},h7:function(){return l}});let s=(0,a(5972).oM)({name:"modal",initialState:{title:"",isOpen:!1,bodyType:"",size:"",extraObject:{}},reducers:{openModal:(e,t)=>{let{title:a,bodyType:s,extraObject:l,size:n}=t.payload;e.isOpen=!0,e.bodyType=s,e.title=a,e.size=n||"md",e.extraObject=l},closeModal:e=>{e.isOpen=!1,e.bodyType="",e.title="",e.extraObject={}}}}),{openModal:l,closeModal:n}=s.actions;t.ZP=s.reducer},4217:function(e,t,a){"use strict";a.d(t,{Q3:function(){return l},o8:function(){return n}});let s=(0,a(5972).oM)({name:"rightDrawer",initialState:{header:"",isOpen:!1,bodyType:"",extraObject:{}},reducers:{openRightDrawer:(e,t)=>{let{header:a,bodyType:s,extraObject:l}=t.payload;e.isOpen=!0,e.bodyType=s,e.header=a,e.extraObject=l},closeRightDrawer:e=>{e.isOpen=!1,e.bodyType="",e.header="",e.extraObject={}}}}),{openRightDrawer:l,closeRightDrawer:n}=s.actions;t.ZP=s.reducer},4814:function(e,t,a){"use strict";a.d(t,{bG:function(){return n}});var s=a(5972),l=a(7908);let n=(0,s.hg)("user/getUserInfo",async e=>{let t=localStorage.getItem("token"),a=await l.Z.get("".concat("http://127.0.0.1:5090","/api/auth/user"),{headers:{Authorization:"Bearer ".concat(t)}});return{name:a.data.data.username,avatar:"https://reqres.in/img/faces/7-image.jpg",emailId:a.data.data.email}}),r=(0,s.oM)({name:"user",initialState:{name:"",avatar:"",emailId:""},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{}),e.addCase(n.fulfilled,(e,t)=>{console.log(t.payload),e.name=t.payload.name,e.avatar=t.payload.avatar}),e.addCase(n.rejected,e=>{})}}),{}=r.actions;t.ZP=r.reducer},6990:function(e,t,a){"use strict";a.d(t,{Y8:function(){return n},Yf:function(){return i},u9:function(){return o}});var s=a(5972),l=a(7908);let n=(0,s.hg)("leads/getLeadsContent",async e=>(await l.Z.get("/api/users?page=2")).data),r=(0,s.oM)({name:"leads",initialState:{isLoading:!1,leads:[]},reducers:{addNewLead:(e,t)=>{e.leads.push(t.payload.newLeadObj)},deleteLead:(e,t)=>{e.leads.splice(t.payload.index,1)}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0}),e.addCase(n.fulfilled,(e,t)=>{e.isLoading=!1,console.log(t.payload.data),e.leads=t.payload.data}),e.addCase(n.rejected,e=>{e.isLoading=!1})}}),{addNewLead:i,deleteLead:o}=r.actions;t.ZP=r.reducer},7381:function(e,t,a){"use strict";a.d(t,{A:function(){return r},Qn:function(){return n},aq:function(){return l},iC:function(){return s}});let s="Test Ali",l=Object.freeze({DEFAULT:"DEFAULT",LEAD_ADD_NEW:"LEAD_ADD_NEW"}),n=Object.freeze({DEFAULT:"DEFAULT",NOTIFICATION:"NOTIFICATION"}),r=Object.freeze({DEFAULT:"DEFAULT"})},2926:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return c},useAuth:function(){return d}});var s=a(7437),l=a(2265),n={saveToken:e=>{localStorage.setItem("token",e)},getToken:()=>JSON.stringify(localStorage.getItem("token")),logout:async()=>(localStorage.removeItem("token"),1),isAuthenticated:()=>!!localStorage.getItem("token")},r=a(7907),i=a(7908);let o=(0,l.createContext)(void 0);function c(e){let{children:t}=e,[a,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!0),f=(0,r.useRouter)(),x=(0,l.useCallback)(async()=>{let e=n.getToken();if(e)try{let t=await i.Z.get("".concat("http://127.0.0.1:5090","/api/user"),{headers:{Authorization:"Bearer ".concat(e)}});localStorage.setItem("userProfile",JSON.stringify(t.data)),u(t.data)}catch(e){console.error("Error fetching user profile:",e),await p()}},[]),p=(0,l.useCallback)(async()=>{let e=n.getToken();if(e)try{let{auth_token:t}=(await i.Z.post("".concat("http://127.0.0.1:5090","/api/auth/refresh"),{refresh_token:e})).data;await n.saveToken(t),await x()}catch(e){console.error("Error refreshing token:",e),N()}},[]),b=(0,l.useCallback)(()=>{c(n.isAuthenticated()),h(!1)},[]);(0,l.useEffect)(()=>{b()},[b]);let g=(0,l.useCallback)(async(e,t)=>{try{let a=await i.Z.post("".concat("http://127.0.0.1:5090","/api/auth/login"),{email:e,password:t}),{auth_token:s}=a.data.data;console.log("auth_token : ",s),n.saveToken(s),u(a.data.user),c(!0)}catch(e){throw console.error("Login error:",e),e}},[x]),j=(0,l.useCallback)(async(e,t,a)=>{try{let s=await i.Z.post("".concat("http://127.0.0.1:5090","/api/auth/register"),{email:e,username:a,password:t,name:""}),{auth_token:l}=s.data.data;n.saveToken(l),u(s.data.user),c(!0)}catch(e){throw console.error("Registration error:",e),e}},[x]),N=(0,l.useCallback)(async()=>{let e=localStorage.getItem("token");if(e)try{await i.Z.post("".concat("http://127.0.0.1:5090","/api/auth/logout"),{},{headers:{Authorization:"Bearer ".concat(e)}}),await n.logout(),u(null),c(!1),localStorage.removeItem("userProfile"),f.push("/login")}catch(e){console.error("Error during logout:",e)}},[f]);return(0,s.jsx)(o.Provider,{value:{isAuthenticated:a,isLoading:m,userProfile:d,login:g,logout:N,register:j},children:t})}function d(){let e=(0,l.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6623:function(e,t,a){"use strict";a.d(t,{CG:function(){return n},TL:function(){return l}});var s=a(828);let l=s.I0.withTypes(),n=s.v9.withTypes();s.oR.withTypes()}},function(e){e.O(0,[908,181,250,893,971,69,744],function(){return e(e.s=2606)}),_N_E=e.O()}]);