(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5748:function(e,t,a){Promise.resolve().then(a.t.bind(a,3385,23)),Promise.resolve().then(a.t.bind(a,3649,23)),Promise.resolve().then(a.bind(a,2076)),Promise.resolve().then(a.bind(a,2926))},7907:function(e,t,a){"use strict";var r=a(5313);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},2076:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(7437),n=a(2265),o=a(828),i=a(9088),s=a(2253),c=a(4217),u=a(4814),l=a(6990),d=a(5972);let f=()=>(0,d.xC)({reducer:{header:i.ZP,rightDrawer:c.ZP,leads:l.ZP,modal:s.ZP,user:u.ZP}});function h(e){let{children:t}=e,a=(0,n.useRef)();return a.current||(a.current=f()),(0,r.jsx)(o.zt,{store:a.current,children:t})}},9088:function(e,t,a){"use strict";a.d(t,{DO:function(){return o},Iw:function(){return n},c0:function(){return i}});let r=(0,a(5972).oM)({name:"header",initialState:{pageTitle:"Home",noOfNotifications:15,newNotificationMessage:"",newNotificationStatus:1},reducers:{setPageTitle:(e,t)=>{e.pageTitle=t.payload.title},removeNotificationMessage:e=>{e.newNotificationMessage=""},showNotification:(e,t)=>{e.newNotificationMessage=t.payload.message,e.newNotificationStatus=t.payload.status}}}),{setPageTitle:n,removeNotificationMessage:o,showNotification:i}=r.actions;t.ZP=r.reducer},2253:function(e,t,a){"use strict";a.d(t,{Mr:function(){return o},h7:function(){return n}});let r=(0,a(5972).oM)({name:"modal",initialState:{title:"",isOpen:!1,bodyType:"",size:"",extraObject:{}},reducers:{openModal:(e,t)=>{let{title:a,bodyType:r,extraObject:n,size:o}=t.payload;e.isOpen=!0,e.bodyType=r,e.title=a,e.size=o||"md",e.extraObject=n},closeModal:e=>{e.isOpen=!1,e.bodyType="",e.title="",e.extraObject={}}}}),{openModal:n,closeModal:o}=r.actions;t.ZP=r.reducer},4217:function(e,t,a){"use strict";a.d(t,{Q3:function(){return n},o8:function(){return o}});let r=(0,a(5972).oM)({name:"rightDrawer",initialState:{header:"",isOpen:!1,bodyType:"",extraObject:{}},reducers:{openRightDrawer:(e,t)=>{let{header:a,bodyType:r,extraObject:n}=t.payload;e.isOpen=!0,e.bodyType=r,e.header=a,e.extraObject=n},closeRightDrawer:e=>{e.isOpen=!1,e.bodyType="",e.header="",e.extraObject={}}}}),{openRightDrawer:n,closeRightDrawer:o}=r.actions;t.ZP=r.reducer},4814:function(e,t,a){"use strict";a.d(t,{bG:function(){return o}});var r=a(5972),n=a(7908);let o=(0,r.hg)("user/getUserInfo",async e=>{let t=localStorage.getItem("token"),a=await n.Z.get("".concat("http://127.0.0.1:5090","/api/auth/user"),{headers:{Authorization:"Bearer ".concat(t)}});return{name:a.data.data.username,avatar:"https://reqres.in/img/faces/7-image.jpg",emailId:a.data.data.email}}),i=(0,r.oM)({name:"user",initialState:{name:"",avatar:"",emailId:""},reducers:{},extraReducers:e=>{e.addCase(o.pending,e=>{}),e.addCase(o.fulfilled,(e,t)=>{console.log(t.payload),e.name=t.payload.name,e.avatar=t.payload.avatar}),e.addCase(o.rejected,e=>{})}}),{}=i.actions;t.ZP=i.reducer},6990:function(e,t,a){"use strict";a.d(t,{Y8:function(){return o},Yf:function(){return s},u9:function(){return c}});var r=a(5972),n=a(7908);let o=(0,r.hg)("leads/getLeadsContent",async e=>(await n.Z.get("/api/users?page=2")).data),i=(0,r.oM)({name:"leads",initialState:{isLoading:!1,leads:[]},reducers:{addNewLead:(e,t)=>{e.leads.push(t.payload.newLeadObj)},deleteLead:(e,t)=>{e.leads.splice(t.payload.index,1)}},extraReducers:e=>{e.addCase(o.pending,e=>{e.isLoading=!0}),e.addCase(o.fulfilled,(e,t)=>{e.isLoading=!1,console.log(t.payload.data),e.leads=t.payload.data}),e.addCase(o.rejected,e=>{e.isLoading=!1})}}),{addNewLead:s,deleteLead:c}=i.actions;t.ZP=i.reducer},2926:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return u},useAuth:function(){return l}});var r=a(7437),n=a(2265),o={saveToken:e=>{localStorage.setItem("token",e)},getToken:()=>JSON.stringify(localStorage.getItem("token")),logout:async()=>(localStorage.removeItem("token"),1),isAuthenticated:()=>!!localStorage.getItem("token")},i=a(7907),s=a(7908);let c=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[a,u]=(0,n.useState)(!1),[l,d]=(0,n.useState)(null),[f,h]=(0,n.useState)(!0),g=(0,i.useRouter)(),p=(0,n.useCallback)(async()=>{let e=o.getToken();if(e)try{let t=await s.Z.get("".concat("http://127.0.0.1:5090","/api/user"),{headers:{Authorization:"Bearer ".concat(e)}});localStorage.setItem("userProfile",JSON.stringify(t.data)),d(t.data)}catch(e){console.error("Error fetching user profile:",e),await m()}},[]),m=(0,n.useCallback)(async()=>{let e=o.getToken();if(e)try{let{auth_token:t}=(await s.Z.post("".concat("http://127.0.0.1:5090","/api/auth/refresh"),{refresh_token:e})).data;await o.saveToken(t),await p()}catch(e){console.error("Error refreshing token:",e),k()}},[]),y=(0,n.useCallback)(()=>{u(o.isAuthenticated()),h(!1)},[]);(0,n.useEffect)(()=>{y()},[y]);let b=(0,n.useCallback)(async(e,t)=>{try{let a=await s.Z.post("".concat("http://127.0.0.1:5090","/api/auth/login"),{email:e,password:t}),{auth_token:r}=a.data.data;console.log("auth_token : ",r),o.saveToken(r),d(a.data.user),u(!0)}catch(e){throw console.error("Login error:",e),e}},[p]),w=(0,n.useCallback)(async(e,t,a)=>{try{let r=await s.Z.post("".concat("http://127.0.0.1:5090","/api/auth/register"),{email:e,username:a,password:t,name:""}),{auth_token:n}=r.data.data;o.saveToken(n),d(r.data.user),u(!0)}catch(e){throw console.error("Registration error:",e),e}},[p]),k=(0,n.useCallback)(async()=>{let e=localStorage.getItem("token");if(e)try{await s.Z.post("".concat("http://127.0.0.1:5090","/api/auth/logout"),{},{headers:{Authorization:"Bearer ".concat(e)}}),await o.logout(),d(null),u(!1),localStorage.removeItem("userProfile"),g.push("/login")}catch(e){console.error("Error during logout:",e)}},[g]);return(0,r.jsx)(c.Provider,{value:{isAuthenticated:a,isLoading:f,userProfile:l,login:b,logout:k,register:w},children:t})}function l(){let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3385:function(){},3649:function(e){e.exports={style:{fontFamily:"'__Inter_36bd41', '__Inter_Fallback_36bd41'",fontStyle:"normal"},className:"__className_36bd41"}}},function(e){e.O(0,[908,181,971,69,744],function(){return e(e.s=5748)}),_N_E=e.O()}]);